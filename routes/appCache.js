var express = require('express'),
    mongoose = require('mongoose'),
    request = require('request'),
    router = express.Router(),
    db = require('../core/dbModule'),
    TIMEOUT = 10000;
var medicineNames = ["25% Dextrose", "5-Amino salicylic Acid (5-ASA)", "Allopurinol", "Amoxicillin+Clavulinic acid", "Atorvastatin", "Betamethasone", "Carboplatin", "Cefixime", "Cetrizine", "Chlorambucil", "Clindamycin", "Clopidogrel", "Dacarbazine", "Daunorubicin", "Diazepam", "EMLA cream", "Enoxaparin", "Famotidine", "Fentanyl", "Filgrastim", "Hydroxychloroquine phosphate", "Ifosfamide", "Imatinib", "Ipratropium bromide", "Leflunomide", "Lorazepam", "Mefloquine", "Mesna", "Misoprostol", "N-acetylcysteine", "Olanzapine", "Oxaliplatin", "Pantoprazole", "Permethrin", "Piperazine", "Premix Insulin 30:70 injection", "Propofol", "Sevoflurane", "Stavudine+Lamivudine", "Tramadol", "Vecuronium", "Zidovudine+Lamivudine+Nevirapine", "Zinc Sulfate", "Acenocoumarol", "Aminophylline", "Benzoic Acid + Salicylic Acid", "Benzylpenicillin", "Bretylium Tosylate", "Cefuroxime", "Centchroman", "Chloramphenicol", "Chlorthalidone", "Clarithromycin", "Clomipramine hydrochloride", "Clonidine Hydrochloride", "Doxapram", "Ethyl Chloride", "Flucytosine", "Furazolidone", "Gamma Benzene Hexachloride", "Isoprenaline Hydrochloride", "Isoxsuprine hydrochloride", "Ketoconazole", "Loperamide", "Mebendazole ", "Atropine Sulphate", "Bupivacaine Hydrochloride", "Diazepam", "EMLA cream", "Ether", "Halothane with vaporizer", "Isoflurane", "Ketamine Hydrochloride", "Lignocaine Hydrochloride", "Lignocaine Hydrochloride + Adrenaline", "Midazolam", "Morphine Sulphate", "Nitrous Oxide", "Oxygen", "Promethazine", "Propofol", "Sevoflurane", "Thiopentone Sodium", "Acetyl Salicylic Acid", "Allopurinol", "Azathioprine", "Colchicin", "Diclofenac", "Fentanyl", "Hydroxychloroquine phosphate", "Ibuprofen", "Leflunomide", "Methotrexate", "Morphine Sulphate", "Paracetamol", "Sulfasalazine", "Tramadol", "Adrenaline Bitartrate", "Cetrizine", "Chlorpheniramine Maleate", "Dexamethasone", "Dexchlorpheniramine Maleate", "Hydrocortisone Sodium Succinate", "Pheniramine Maleate", "Prednisolone", "Promethazine", "Activated Charcoal", "Atropine Sulphate", "Calcium gluconate", "Desferrioxamine mesylate", "Dimercaprol", "Flumazenil", "Methylthioninium chloride (Methylene blue)", "N-acetylcysteine", "Naloxone", "Penicillamine", "Pralidoxime Chloride(2-PAM)", "Sodium Nitrite", "Sodium Thiosulphate", "Specific antisnake venom", "Carbamazepine", "Diazepam", "Lorazepam", "Magnesium sulphate", "Phenobarbitone", "Phenytoin Sodium", "Sodium Valproate", "Acyclovir", "Albendazole", "Amikacin", "Amoxicillin", "Amoxicillin+Clavulinic acid", "Amphotericin B", "Ampicillin", "Artesunate (To be used only in combination with Sulfadoxine +", "Azithromycin", "Benzathine Benzylpenicillin", "Cefixime", "Cefotaxime", "Ceftazidime", "Ceftriaxone", "Cephalexin", "Chloroquine phosphate", "Ciprofloxacin Hydrochloride", "Clindamycin", "Clofazimine", "Clotrimazole", "Cloxacillin", "Co-trimoxazole (Trimethoprim + Sulphamethoxazole)", "Dapsone", "Didanosine", "Diethylcarbamazine citrate", "Diloxanide Furoate", "Doxycycline", "Efavirenz", "Erythromycin Estolate", "Ethambutol", "Fluconazole", "Gentamicin", "Griseofulvin", "Indinavir", "Isoniazid", "Lamivudine", "Lamivudine + Nevirapine + Stavudine", "Lamivudine + Zidovudine", "Mefloquine", "Metronidazole", "Nelfinavir", "Nevirapine", "Nitrofurantoin", "Nystatin", "Ofloxacin", "Pentamidine Isothionate", "Piperazine", "Praziquantel", "Primaquine", "Pyrazinamide", "Pyrimethamine", "Quinine sulphate", "Rifampicin", "Ritonavir", "Saquinavir", "Sodium Stibogluconate", "Stavudine", "Stavudine+Lamivudine", "Streptomycin Sulphate", "Sulfadoxine + Pyrimethamine", "Sulphadiazine", "Vancomycin Hydrochloride", "Zidovudine", "Zidovudine+ Lamivudine+ Nevirapine", "Acetyl Salicylic Acid", "Dihydroergotamine", "Paracetamol", "Propranolol hydrochloride", "5-Fluorouracil", "Actinomycin D", "Allopurinol", "Alpha Interferon", "Azathioprine", "Bleomycin", "Busulphan", "Carboplatin", "Chlorambucil", "Cisplatin", "Cyclophosphamide", "Cyclosporine", "Cytosine arabinoside", "Dacarbazine", "Danazol", "Daunorubicin", "Doxorubicin", "Etoposide", "Filgrastim", "Flutamide", "Folinic Acid", "Gemcitabine hydrochloride", "Ifosfamide", "Imatinib", "L- Asparaginase", "Melphalan", "Mercaptopurine", "Mesna", "Methotrexate", "Mitomycin-C", "Morphine Sulphate", "Ondansetron", "Oxaliplatin", "Paclitaxel", "Prednisolone", "Procarbazine", "Actinomycin D", "Allopurinol", "Alpha Interferon", "Azathioprine", "Bleomycin", "Busulphan", "Carboplatin", "Chlorambucil", "Cisplatin", "Cyclophosphamide", "Raloxifene", "Tamoxifen Citrate", "Vinblastine sulphate", "Vincristine", "Bromocriptine Mesylate", "Levodopa+ Carbidopa", "Trihexyphenidyl Hydrochloride", "Cyanocobalamin", "Enoxaparin", "Ferrous Salt", "Folic Acid", "Heparin Sodium", "Iron Dextran", "Phytomenadione", "Protamine Sulphate", "Pyridoxine", "Warfarin sodium", "Albumin", "Cryoprecipitate", "Dextran-40", "Dextran-70", "Factor IX Complex (Coagulation Factors II,VII, IX, X)", "Factor VIII Concentrate", "Fresh frozen plasma", "Hydroxyethyl Starch (Hetastarch)", "Platelet Rich Plasma", "Polygeline", "Acetyl salicylic acid", "Adenosine", "Amiodarone", "Amlodipine", "Atenolol", "Atorvastatin", "Clopidogrel", "Digoxin", "Diltiazem", "Dobutamine", "Dopamine Hydrochloride", "Enalapril Maleate", "Esmolol", "Glyceryl Trinitrate", "Heparin Sodium", "Hydrochlorthiazide", "Isosorbide 5 Mononitrate/Dinitrate", "Lignocaine Hydrochloride", "Losartan Potassium", "Methyldopa", "Metoprolol", "Nifedipine", "Procainamide Hydrochloride", "Sodium Nitroprusside", "Streptokinase", "Urokinase", "Verapamil", "Acyclovir", "Benzyl benzoate", "Betamethasone Dipropionate", "Calamine", "Coal Tar", "Dithranol", "Framycetin Sulphate", "Glycerin", "Methylrosanilinium Chloride (Gentian Violet)", "Miconazole", "Neomycin + Bacitracin", "Permethrin", "Povidone Iodine", "Salicylic Acid", "Silver Sulphadiazine", "Zinc Oxide", "Barium Sulphate", "Calcium Ipodate", "Fluorescein", "Iopanoic Acid", "Lignocaine", "Meglumine Iothalamate", "Meglumine Iotroxate", "Propyliodone", "Sodium Iothalamate", "Sodium Meglumine Diatrizoate", "Tropicamide", "Acriflavin+Glycerin", "Benzoin Compound", "Bleaching Powder", "Cetrimide", "Chlorhexidine", "Ethyl Alcohol 70%", "Formaldehyde IP", "Gentian Violet", "Glutaraldehyde", "Hydrogen Peroxide", "Potassium Permanganate", "Povidone Iodine", "Furosemide", "Hydrochlorothiazide", "Mannitol", "Spironolactone", "5-Amino salicylic Acid", "Aluminium Hydroxide + Magnesium Hydroxide", "Bisacodyl", "Dicyclomine Hydrochloride", "Domperidone", "Famotidine", "Hyoscine Butyl Bromide", "Ispaghula", "Metoclopramide", "Omeprazole", "Ondansetron", "Oral Rehydration Salts", "Pantoprazole", "Promethazine", "Ranitidine", "Zinc Sulfate", "25% Dextrose", "Carbimazole", "Clomiphene citrate", "Condoms", "Dexamethasone", "Ethinylestradiol", "Ethinylestradiol + Levonorgesterol", "Ethinylestradiol + Norethisterone", "Glibenclamide", "Glucagon", "Hormone Releasing IUD", "Hydrocortisone Sodium Succinate", "Insulin Injection(Soluble)", "Intermediate Acting(Lente/NPH Insulin)", "Iodine", "IUD containing Copper", "Levothyroxine", "Medroxy Progesterone Acetate", "Metformin", "MethylPrednisolone", "Norethisterone", "Prednisolone", "Premix Insulin 30:70 injection", "Testosterone", "Anti-D immunoglobin (human)", "Antitetanus Human immunoglobin", "B.C.G Vaccine", "D.P.T Vaccine", "Diphtheria Antitoxin", "Hepatitis B Vaccine", "Measles Vaccine", "Oral Poliomyelitis vaccine (LA)", "Polyvalent Antisnake Venom", "Rabies", "Rabies Vaccine", "Tetanus Toxoid", "Tuberculin, Purified Protein derivative", "Atracurium besylate", "Neostigmine", "Pyridostigmine", "Succinyl choline chloride", "Vecuronium", "Acetazolamide", "Atropine Sulphate", "Betaxolol Hydrochloride", "Chloramphenicol", "Ciprofloxacin Hydrochloride", "Gentamicin", "Homatropine", "Methyl Cellulose", "Miconazole", "Phenylephrine", "Pilocarpine", "Povidone Iodine", "Prednisolone Acetate", "Prednisolone Sodium Phosphate", "Sulphacetamide Sodium", "Tetracaine Hydrochloride", "Timolol Maleate", "Betamethasone", "Methyl Ergometrine", "Mifepristone", "Misoprostol", "Nifedipine", "Oxytocin", "Terbutaline Sulphate", "Dialysis Solution", "Alprazolam", "Amitriptyline", "Chlorpromazine hydrochloride", "Diazepam", "Fluoxetine hydrochloride", "Haloperidol", "Imipramine", "Lithium Carbonate", "Olanzapine", "Sodium Valproate", "Beclomethasone Dipropionate", "Codeine phosphate", "Dextromethorphan", "Hydrocortisone sodium succinate", "Ipratropium bromide", "Salbutamol sulphate", "Glucose", "Glucose with sodium chloride", "N/2 Saline", "N/5 Saline", "Normal Saline", "Oral Rehydration Salts", "Potassium Chloride", "Ringer Lactate", "Sodium Bicarbonate", "Water for Injection", "Ascorbic Acid", "Calcium gluconate", "Calcium carbonate", "Multivitamins (As per Schedule V of Drugs and Cosmetics Rules)", "Nicotinamide", "Pyridoxine", "Riboflavin", "Thiamine", "Vitamin A", "Vitamin D (Ergocalciferol)", "25% Dextrose", "5-Amino salicylic Acid", "5-Fluorouracil", "Acetazolamide", "Acetyl Salicylic Acid", "Acriflavin+Glycerin", "Actinomycin D", "Activated Charcoal", "Acyclovir", "Adenosine", "Adrenaline Bitartrate", "Albendazole", "Albumin", "Allopurinol", "Alpha Interferon", "Alprazolam", "Aluminium Hydroxide + Magnesium Hydroxide", "Amikacin", "Amiodarone", "Amitriptyline", "Amlodipine", "Amoxicillin", "Amoxicillin+Clavulinic acid", "Amphotericin B", "Ampicillin", "Anti-D immunoglobin (human)", "Antitetanus Human immunoglobin", "Artesunate (To be used only in combination with Sulfadoxine + Pyrinethamine)", "Ascorbic Acid", "Atenolol", "Atorvastatin", "Atracurium besylate", "Atropine Sulphate", "Azathioprine", "Azithromycin", "B.C.G Vaccine", "Barium Sulphate", "Beclomethasone Dipropionate", "Benzathine Benzylpenicillin", "Benzoin Compound", "Benzyl benzoate", "Betamethasone", "Betamethasone Dipropionate", "Betaxolol Hydrochloride", "Bisacodyl", "Bleaching Powder", "Bleomycin", "Bromocriptine Mesylate", "Bupivacaine Hydrochloride", "Busulphan", "Calamine", "Calcium carbonate", "Calcium gluconate", "Calcium Ipodate", "Carbamazepine", "Carbimazole", "Carboplatin", "Cefixime", "Cefotaxime", "Ceftazidime", "Ceftriaxone", "Cephalexin", "Cetrimide", "Cetrizine", "Chlorambucil", "Chloramphenicol", "Chlorhexidine", "Chloroquine phosphate", "Chlorpheniramine Maleate", "Chlorpromazine hydrochloride", "Ciprofloxacin Hydrochloride", "Cisplatin", "Clindamycin", "Clofazimine", "Clomiphene citrate", "Clopidogrel", "Clotrimazole", "Cloxacillin", "Coal Tar", "Codeine phosphate", "Colchicine", "Condoms", "Co-Trimoxazole (Trimethoprim + Sulphamethoxazole)", "Cryoprecipitate", "Cyanocobalamin", "Cyclophosphamide", "Cyclosporine", "Cytosine arabinoside", "D.P.T Vaccine", "Dacarbazine", "Danazol", "Dapsone", "Daunorubicin", "Desferrioxamine mesylate", "Dexamethasone", "Dexchlorpheniramine Maleate", "Dextran-40", "Dextran-70", "Dextromethorphan", "Diazepam", "Diclofenac", "Dicyclomine Hydrochloride", "Didanosine", "Diethylcarbamazine citrate", "Digoxin", "Dihydroergotamine", "Diloxanide Furoate", "Diltiazem", "Dimercaprol", "Diphtheria Antitoxin", "Dithranol", "Dobutamine", "Domperidone", "Dopamine Hydrochloride", "Doxorubicin", "Doxycycline", "Efavirenz", "EMLA cream", "Enalapril Maleate", "Enoxaparin", "Erythromycin Estolate", "Esmolol", "Ethambutol", "Ether", "Ethinylestradiol", "Ethinylestradiol + Levonorgesterol", "Ethinylestradiol + Norethisterone", "Ethyl Alcohol 70%", "Etoposide", "Factor IX Complex (Coagulation Factors II,VII, IX, X)", "Factor VIII Concentrate", "Famotidine", "Fentanyl", "Ferrous Salt", "Filgrastim", "Fluconazole", "Flumazenil", "Fluorescein", "Fluoxetine hydrochloride", "Flutamide", "Folic Acid", "Folinic Acid", "Formaldehyde IP", "Framycetin Sulphate", "Fresh frozen plasma", "Furosemide", "Gemcitabine hydrochloride", "Gentamicin", "Gentian Violet", "Glibenclamide", "Glucagon", "Glucose", "Glucose with sodium chloride", "Glutaraldehyde", "Glycerin", "Glyceryl Trinitrate", "Griseofulvin", "Haloperidol", "Halothane with vaporizer", "Heparin Sodium", "Hepatitis B Vaccine", "Homatropine", "Hormone Releasing IUD", "Hydrochlorothiazide", "Hydrocortisone sodium succinate", "Hydrogen Peroxide", "Hydroxychloroquine phosphate", "Hydroxyethyl Starch (Hetastarch)", "Hyoscine Butyl Bromide", "Ibuprofen", "Ifosfamide", "Imatinib", "Imipramine", "Indinavir", "Insulin Injection(Soluble)", "Intermediate Acting(Lente/NPH Insulin)", "Intraperitoneal Dialysis Solution", "Iodine", "Iopanoic Acid", "Ipratropium bromide", "Iron Dextran", "Isoflurane", "Isoniazid", "Isosorbide 5 Mononitrate/Dinitrate", "Ispaghula", "IUD containing Copper", "Ketamine Hydrochloride", "L- Asparaginase", "Lamivudine", "Lamivudine + Nevirapine + Stavudine", "Lamivudine + Zidovudine", "Leflunomide", "Levodopa+ Carbidopa", "Levothyroxine", "Lignocaine", "Lignocaine Hydrochloride", "Lignocaine Hydrochloride + Adrenaline", "Lithium Carbonate", "Lorazepam", "Losartan Potassium", "Magnesium sulphate", "Mannitol", "Measles Vaccine", "Medroxy Progesterone Acetate", "Mefloquine", "Meglumine Iothalamate", "Meglumine Iotroxate", "Melphalan", "Mercaptopurine", "Mesna", "Metformin", "Methotrexate", "Methyl Cellulose", "Methyl Ergometrine", "Methyldopa", "MethylPrednisolone", "Methylrosanilinium Chloride (Gentian Violet)", "Methylthioninium chloride (Methylene blue)", "Metoclopramide", "Metoprolol", "Metronidazole", "Miconazole", "Midazolam", "Mifepristone", "Misoprostol", "Mitomycin-C", "Morphine Sulphate", "Multivitamins (As per Schedule V of Drugs and Cosmetics Rules)", "N/2 Saline", "N/5 Saline", "N-acetylcysteine", "Naloxone", "Nelfinavir", "Neomycin + Bacitracin", "Neostigmine", "Nevirapine", "Nicotinamide", "Nifedipine", "Nitrofurantoin", "Nitrous Oxide", "Norethisterone", "Normal Saline", "Nystatin", "Ofloxacin", "Olanzapine", "Omeprazole", "Ondansetron", "Oral Poliomyelitis vaccine (LA)", "Oral Rehydration Salts", "Oxaliplatin", "Oxygen", "Oxytocin", "Paclitaxel", "Pantoprazole", "Paracetamol", "Penicillamine", "Pentamidine Isothionate", "Permethrin", "Pheniramine Maleate", "Phenobarbitone", "Phenylephrine", "Phenytoin Sodium", "Phytomenadione", "Pilocarpine", "Piperazine", "Platelet Rich Plasma", "Polygeline", "Polyvalent Antisnake Venom", "Potassium Chloride", "Potassium Permanganate", "Povidone Iodine", "Pralidoxime Chloride(2-PAM)", "Praziquantel", "Prednisolone", "Prednisolone Acetate", "Prednisolone Sodium Phosphate", "Premix Insulin 30:70 injection", "Primaquine", "Procainamide Hydrochloride", "Procarbazine", "Promethazine", "Propofol", "Propranolol hydrochloride", "Propyliodone", "Protamine Sulphate", "Pyrazinamide", "Pyridostigmine", "Pyridoxine", "Pyrimethamine", "Quinine sulphate", "Rabies immunoglobin", "Rabies Vaccine", "Raloxifene", "Ranitidine", "Riboflavin", "Rifampicin", "Ringer Lactate", "Ritonavir", "Salbutamol sulphate", "Salicylic Acid", "Saquinavir", "Sevoflurane", "Silver Sulphadiazine", "Sodium Bicarbonate", "Sodium Iothalamate", "Sodium Meglumine Diatrizoate", "Sodium Nitrite", "Sodium Nitroprusside", "Sodium Stibogluconate", "Sodium Thiosulphate", "Sodium Valproate", "Specific antisnake venom", "Spironolactone", "Stavudine", "Stavudine+Lamivudine", "Streptokinase", "Streptomycin Sulphate", "Succinyl choline chloride", "Sulfadoxine + Pyrimethamine", "Sulfasalazine", "Sulphacetamide Sodium", "Sulphadiazine", "Tamoxifen Citrate", "Terbutaline Sulphate", "Testosterone", "Tetanus Toxoid", "Tetracaine Hydrochloride", "Thiamine", "Thiopentone Sodium", "Timolol Maleate", "Tramadol", "Trihexyphenidyl Hydrochloride", "Tropicamide", "Tuberculin, Purified Protein derivative", "Urokinase", "Vancomycin Hydrochloride", "Vecuronium", "Verapamil", "Vinblastine sulphate", "Vincristine", "Vitamin A", "Vitamin D (Ergocalciferol)", "Warfarin sodium", "Water for Injection", "Zidovudine", "Zidovudine+ Lamivudine+ Nevirapine", "Zinc Oxide", "Zinc Sulfate"];
/*******************************************************************
 *	This module will serve permitted autosuggestion requirements   *
 *	Clients will generate requests to this route with random texts *
 *	on their auto-complete input fields							   *
 *
 * :what can be one of [recipeNames,exerciseNames,medicineNames]
 ******************************************************************/
router.get('/:what', function(req, res, next) {
    var modelUrlMappings = {
        "recipeNames": "Recipe",
        "exerciseNames": "Exercise",
        "medicineNames": ""
    };
    switch (req.params.what) {
        case "medicineNames":
            return res.status(200).send(medicineNames);
            break;
        default:
	        var model = mongoose.model(modelUrlMappings[req.params.what]);
	        model.distinct("name").exec(function(err, data){
	        	if(err) {return res.status(503).send(err.message);}
	        	res.status(200).send(data);
	        });
	        break;
    }
});
module.exports = router;